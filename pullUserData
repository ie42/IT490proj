<?php
require_once('dbConnect.php'); // Include your database connection code

function getUserProfileData($userId) {
    $mysqli = dbConnect(); // Establish a database connection

    // Query to retrieve user data based on the user's ID
    $query = "SELECT FavoriteDirector, FavoriteGenre, FavoriteMovie, FavoriteActor, Bio FROM Users WHERE UserID = ?";
    
    if ($stmt = $mysqli->prepare($query)) {
        $stmt->bind_param("i", $userId);
        $stmt->execute();
        $stmt->bind_result($favoriteDirector, $favoriteGenre, $favoriteMovie, $favoriteActor, $bio);
        $stmt->fetch();
        $stmt->close();

        // Format the data into an associative array
        $userData = [
            "FavoriteDirector" => $favoriteDirector,
            "FavoriteGenre" => $favoriteGenre,
            "FavoriteMovie" => $favoriteMovie,
            "FavoriteActor" => $favoriteActor,
            "Bio" => $bio,
        ];

        return $userData;
    }

    return null; // Return null if user not found or an error occurred
}

// Usage example
$userId = 123; // Replace with the actual user's ID
$userData = getUserProfileData($userId);

if ($userData) {
    // Now you can access and display each piece of data individually
    echo "Favorite Director: " . $userData["FavoriteDirector"] . "<br>";
    echo "Favorite Genre: " . $userData["FavoriteGenre"] . "<br>";
    echo "Favorite Movie: " . $userData["FavoriteMovie"] . "<br>";
    echo "Favorite Actor: " . $userData["FavoriteActor"] . "<br>";
    echo "Bio: " . $userData["Bio"];
} else {
    echo "User not found or an error occurred.";
}

$mysqli->close(); // Close the database connection
?>
